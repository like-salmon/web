{% extends "admin_panel.html" %}
{% block content %}


    <form method="get" id="smsf">
        <h3><i class="fa fa-search fa-lg"></i>搜索机器</h3>
        <div class="frow">
                    <label>机器状态:</label>
        <select name="mstatus" id="mstatus">
            <option value="a"{% if mstatus == 'a'%} selected {% end %}>空闲</option>
            <option value="b" {% if mstatus == 'b'%} selected {% end %}>租用</option>
            <option value="c" {% if mstatus == 'c'%} selected {% end %}>托管</option>
            <option value="d" {% if mstatus == 'd'%} selected {% end %}>试用</option>
            <option value="f" {% if mstatus == 'f'%} selected {% end %}>回收</option>
        </select>
        </div>
        <div class="frow">
            <label>机房:</label>
            <select name="mroom" id="mroom">
                <option value="2"{% if mroom == '2' %}selected{% end %}>东莞枫华园</option>
                <option value="1"{% if mroom == '1' %}selected{% end %}>厦门哈曼尼</option>
                <option value="3"{% if mroom == '3' %}selected{% end %}>浙江绍兴</option>
                <option value="4"{% if mroom == '4' %}selected{% end %}>浙江杭州</option>
                <option value="5"{% if mroom == '5' %}selected{% end %}>香港机房</option>
                <option value="6"{% if mroom == '6' %}selected{% end %}>美国机房</option>
            </select>
        </div>
        <div class="frow">
            <label>机器类型:</label>
        <select name="mtype" id="mtype">
            <option value="0" {% if mtype == '0'%}selected{% end %}>普通机器</option>
            <option value="1" {% if mtype == '1'%}selected{% end %}>刀片机</option>
        </select>
        <br />
        </div>

        <div class="area frow">

            <div class="nums">
                <label>机柜编号:</label><input type="text" name="cnum" class="cnum" value="{{cnum}}"/>
            </div>
            <div class="nums">
                 <label>资产编号:</label><input type="text" name="anum" class="anum" value="{{anum}}"/>
            </div>
            <div class="nums">
                <label>外部编号:</label><input type="text" name="onum" class="onum" value="{{onum}}"/>
            </div>
            <div class="nums ip">
                <label>机器IP:</label><input type="text" name="ips" class="ips" value="{{ips}}"/>
            </div>
            <div class="nums">
                <input type="submit" value="搜索"/>
            </div>
        </div>

    </form>
    <h3>机器列表</h3>
    <table class="machines_tb">
        <tbody>
        <tr class="title">
            <td>编号</td>
            <td>机房</td>
             <td>机柜编号</td>
            <td>资产编号</td>
            <td>外部编号</td>
            <td>IP地址</td>
            <td>硬件配置</td>
            <td>带宽</td>
            <td>所属业务员</td>
            <td>机器状态</td>
            <td>备注</td>
            <td>操作</td>
        </tr>
        {% if ms %}
        {% for i in ms %}
            <tr class="mlist">
            <td class="tid">{{i[0]}}</td>
            <td><input type="text" disabled="disabled" name="loca" id="loca" value="{{i[2].split(',')[1]}}"/></td>
            <td><input type="text" disabled="disabled" name="cnum" id="cnum" value="{{i[3]}}"/></td>
            <td><input type="text" disabled="disabled" name="anum" id="anum" value="{{i[4]}}"/></td>
            <td><input type="text" disabled="disabled" name="onum" id="onum" value="{{i[5]}}"/></td>
            <td><input type="text" disabled="disabled" name="ips" id="ips" value="{{i[1]}}"/></td>
            <td><input type="text" disabled="disabled" name="config" id="config" value="{{i[9]}}"/></td>
            <td><input type="text" disabled="disabled" name="bw" id="bw" value="{{i[6]}}"/></td>
            <td><input type="text" disabled="disabled" name="wsales" id="wsales" value="{{i[8].split(',')[1] if i[8] else i[8]}}"/></td>
            <td><input type="text" disabled="disabled" name="status" id="status" value="{{i[7].split(',')[1]}}"/></td>
            <td><input type="text" disabled="disabled" name="memo" id="memo" value="{{i[11]}}"/></td>
            <td class="ltd"><span class="edit">编辑</span>|<span class="remove">删除</span>{% if "f" in i[7] %}|<span class="release">回收</span>{% end %}<div class="loading"><img src="{{static_url("img/loading.gif")}}"></div></td>
        </tr>

        {% end %}
        {% end %}
        </tbody>
    </table>
    <ul class="pagination">
        {% if pages and 1< pages <= 24 %}
        {% for i in range(1,pages+1) %}
            {% if i == offset %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a></li>
                    {% else %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a></li>
                    {% end %}
            {% end %}
        {% end %}
        {% if pages and pages > 24 %}
        {# ------ #}
        <li><a href="/admin/all-machines?offset={{1}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class=""><<</a></li>

        {% if offset > 1%}
            <li><a href="/admin/all-machines?offset={{offset-1}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class=""><</a></li>
        {% end %}
        {% if offset < pages/3 %}
            {% if (pages/3 - offset) >6 and offset >9  %}
               {% for i in range(1,5) %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a>
                    {% end %}
                    <li><a href="javascript:;" class="empty">...</a>
                    {% for i in range(offset-2,offset+3) %}
                    {% if i == offset %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a>
                    {% else %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a>
                    {% end %}
                    {% end %}
            {% elif (pages/3 - offset) > 6 and offset <=9  %}
                {% for i in range(1,offset+4) %}
                    {% if i == offset %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a>
                    {% else %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a>
                    {% end %}
                {% end %}
        {% elif (pages/3 - offset) <= 6 and offset>9  %}
            {% for i in range(1,5) %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a>
                    {% end %}
                    <li><a href="javascript:;" class="empty">...</a>
                    {% for i in range(offset-3,offset+3) %}
                    {% if i == offset %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a>
                    {% else %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a>
                    {% end %}
                    {% end %}
        {% elif (pages/3 - offset) <= 6 and offset <= 9  %}
            {% for i in range(1,offset+4) %}
                    {% if i == offset %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a>
                    {% else %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a>
                    {% end %}
                {% end %}
    {% end %}

        <li><a href="javascript:;" class="empty">...</a></li>

        {% for i in range(pages/2-3,pages/2+3) %}
            <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}">{{i}}</a></li>
        {% end %} {# end for #}
        <li><a href="javascript:;" class="empty">...</a></li>

        {% for i in range(pages-3,pages+1) %}
            <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}">{{i}}</a></li>
        {% end %}
        {% end %} {# end if offset 1/3 #}

        {# ------ #}

        {# 1/3 ~ 2/3 part #}
        {% if pages/3 <= offset <= pages/3*2 %}
        {% for i in range(1,5) %}
            <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}">{{i}}</a></li>
        {% end %}{# end for #}

        <li><a href="javascript:;" class="empty">...</a></li>

        {% for i in range(offset-3,offset+4) %}
        {% if i == offset %}
            <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a></li>
            {% else %}
        <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}">{{i}}</a></li>
        {% end %} {# end if #}

        {% end %} {# end for #}
        <li><a href="javascript:;" class="empty">...</a></li>

        {% for i in range(pages-3,pages+1) %}
            <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}">{{i}}</a></li>
        {% end %} {# end for #}
        {% end %} {# end if offset 2/3 #}

        {# ------ #}

        {# pages-3 part #}
        {% if pages/3*2 < offset <= pages %}
        {% for i in range(1,6) %}
            {% if i == offset %}
            <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a></li>
            {% else %}
            <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a></li>
            {% end %}
        {% end %}
        <li><a href="javascript:;" class="empty">...</a></li>

        {% for i in range(pages/2-3,pages/2+3) %}
            {% if i == offset %}
            <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a></li>
            {% else %}
            <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a></li>
            {% end %}
        {% end %} {# end for #}
        <li><a href="javascript:;" class="empty">...</a></li>

        {% if pages - offset < 6 %}
            {% for i in range(offset-2,pages+1) %}
            {% if i == offset %}
                <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a></li>
            {% else %}
                <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a></li>
            {% end %}
            {% end %}
        {% else %}
            {% for i in range(offset-2,offset+2) %}
                {% if i == offset %}
                <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a></li>
                {% else %}
                <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a></li>
                {% end %}
            {% end %}
            <li><a href="javascript:;" class="empty">...</a></li>
            {% for i in range(pages-3,pages+1) %}
                {% if i == offset %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="active">{{i}}</a></li>
                {% else %}
                    <li><a href="/admin/all-machines?offset={{i}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">{{i}}</a></li>
                {% end %}
            {% end %} {# end for #}
        {% end %}
        {% end %} {# end if if 2/3*pages<= offset <= pages% #}
        {% if offset < pages %}
        <li><a href="/admin/all-machines?offset={{offset+1}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">> </a></li>
        {% end %}
        <li><a href="/admin/all-machines?offset={{pages}}&mtype={{mtype}}&mroom={{mroom}}&cnum={{cnum}}&anum={{anum}}&onum={{onum}}&mstatus={{mstatus}}&ips={{ips}}" class="">>></a></li>
        {% end %} {# end if pages #}
    </ul>
{% end %}
