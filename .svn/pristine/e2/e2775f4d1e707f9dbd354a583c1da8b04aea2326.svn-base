<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>利联科技-客户注册登陆</title>
    <meta name="application-name" content="利联科技"/>
    <meta name="renderer" content="webkit"><!-- 强制360使用极速模式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <link rel="shortcut icon" href="{{static_url("img/favicon.ico")}}" type="image/x-icon"/>
    <link rel="icon" href="{{static_url("img/favicon.ico")}}" type="image/x-icon"/>
    <link rel="stylesheet" href="{{static_url("css/public.css")}}"/>
    <link rel="stylesheet" href="{{static_url("css/font-awesome-4.7.0/css/font-awesome.css")}}"/>
    <link rel="stylesheet" href="{{static_url("css/client/client.css")}}"/>
</head>

<style>

    body {
        overflow: hidden;
    }

</style>

<body>
<div class="content cauth">

</div>
<div class="authbox">
    <ul class="nul">
        <li class="" data-target="clogin"><a href="/client/auth/">登陆</a></li
        ><li class="active" data-target="creg"><a href="/client/reg/">注册</a></li>
    </ul>
    <div id='creg'>
        <form id="adlgform" class="cform rform" method="post">
            {% raw xsrf_form_html() %}
            <div class="frow">
                <input type="text" placeholder="请输入用户名,6位数字" name="uacc" maxlength="6" pattern="\d{6}" class="finput" autocomplete="new-password" required/>
                <i class="fa fa-address-book-o fa-2x" aria-hidden="true"></i>
                <div class="tips amntips"><i></i>
                    <span></span></div>
            </div>
            <div class="frow">
                <input type="text" placeholder="请输入手机号码" name="mobile" maxlength="11" class="finput" pattern="\d{11}" autocomplete="new-password" required/>
                <i class="fa fa-mobile-phone fa-2x" aria-hidden="true"></i>
                <div class="tips amntips"><i></i>
                    <span></span></div>
            </div>
            <div class="frow">
                <input type="password" placeholder="请输入6-16位用户密码" name="unpwd" maxlength="16" class="finput" autocomplete="new-password" pattern="[a-zA-Z0-9@\-]{6,16}" required/>
                <i class="fa fa-key fa-2x" aria-hidden="true"></i>
                <div class="tips ampwdtips"><i></i>
                    <span></span></div>
            </div>
            <div class="frow">
                <input type="password" placeholder="请再次输入密码" name="unrpwd" maxlength="16" class="finput" autocomplete="new-password" pattern="[a-zA-Z0-9@\-]{6,16}" required/>
                <i class="fa fa-key fa-2x" aria-hidden="true"></i>
                <div class="tips ampwdtips"><i></i>
                    <span></span></div>
            </div>
            <div class="frow">
                <input type="text" placeholder="请验证码" name="ucc" maxlength="6" class="finput" autocomplete="new-password" pattern="\d{6}" required/>
                <i class="fa fa-envelope-open fa-2x" aria-hidden="true"></i><input type="button" id='scc' value="发送验证码"/>
                <div class="tips cctips"><i></i>
                    <span></span></div>
            </div>

            <div class="frow">
                <input type="submit" value="注册" class="regbtn" style="background-color:#ccc;color:#fff;" disabled="disabled"/>
            </div>

        </form>
    </div>
</div>


<script type="text/javascript" src="{{static_url("js/jquery-1.9.1.min.js")}}"></script>
<script type = "text/javascript" src="{{static_url("js/client.js")}}"></script>

<script type="text/javascript">
 var obj = $.regconfig("#adlgform.cform");
    for(var i in obj){
        $.validateField.call(null,obj[i]);
    }
     function getcode() {
        $(".cform .frow #scc").click(function (e) {
            e.preventDefault();
            var that = $(this);
            var phone = $(".cform .frow input[name=mobile]").val();

            if (/\d{11}/.test(phone)) {
                $(this).attr("disabled", true).css({"background-color": "#ccc"}).val("正在发送...");
                $.get("/client/getmsg/", {phone: phone}, function (data) {
                    if (data['rs'] == "1050") {
                        that.css("background","#a78c3f").val("已发送");
                        var t = 100;
                        var c=window.setInterval(function () {
                            that.val(t+'s');
                            t -= 1;
                            if (t == 0) {
                            window.clearInterval(c);
                            that.attr("disabled", false).val("发送验证码");
                            getcode();
                        }
                        }, 1000);

                    } else if (data['rs'] == "1051") {
                        that.val("获取验证码失败，请稍后再试!");
                    }
                }, "json");
            } else {
                !$(".cform .frow .cctips span").text().length ? $.tips(".cform .frow .cctips", "请输入手机号码!", 2) : "";
                return false;
            }
        });
    }
getcode();

</script>
</body>
</html>